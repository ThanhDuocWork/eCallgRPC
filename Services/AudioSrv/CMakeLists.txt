cmake_minimum_required(VERSION 3.10)
project(AudioSrv)
add_definitions(-Wl,--copy-dt-needed-entries)

set(SOURCES
    ${CMAKE_CURRENT_SOURCE_DIR}/src/AudioSrv.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/src/AudioFunc.cpp
    ${CMAKE_CURRENT_SOURCE_DIR}/src/main.cpp
)

# ğŸ”¹ ThÃªm Ä‘Æ°á»ng dáº«n chá»©a `service.grpc.pb.h`
include_directories(${CMAKE_SOURCE_DIR}/Services/ServiceManager/gencode)

# ğŸ”¹ ThÃªm thÆ° má»¥c chá»©a cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t
include_directories(
    ${CMAKE_SOURCE_DIR}/Utils/Parameter/inc
    ${CMAKE_SOURCE_DIR}/Utils/Logger/inc
    ${CMAKE_CURRENT_SOURCE_DIR}/inc
)

# ğŸ”¹ TÃ¬m thÆ° viá»‡n Protobuf vÃ  gRPC trÆ°á»›c khi sá»­ dá»¥ng
find_package(Protobuf REQUIRED)
find_package(gRPC REQUIRED)

# ğŸ”¹ Táº¡o executable cho AudioSrv
add_executable(AudioSrv ${SOURCES})

# ğŸ”¹ LiÃªn káº¿t AudioSrv vá»›i service_proto vÃ  cÃ¡c thÆ° viá»‡n cáº§n thiáº¿t
target_link_libraries(AudioSrv
    Utils
    asound
    service_proto  # Sá»­ dá»¥ng thÆ° viá»‡n Ä‘Ã£ táº¡o tá»« ServiceManager
    protobuf::libprotobuf
    gRPC::grpc++
    pthread
)
